# 服务状态检测功能 - 演示指南

## 📸 功能演示

### 场景1：服务正常状态

**视觉效果**：
```
┌─────────────────────────────────────────────────────┐
│  定价与服务购买                                        │
│  选择适合您的许可证或月卡服务，享受完整功能与优质服务      │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐          │
│  │ AI服务   │  │ 积分套餐  │  │ 许可证   │          │
│  │ ¥4.99/月 │  │ ¥9.9/永久 │  │ ¥14.99  │          │
│  │          │  │          │  │          │          │
│  │ [立即购买]│  │ [立即购买]│  │ [立即购买]│          │
│  └──────────┘  └──────────┘  └──────────┘          │
└─────────────────────────────────────────────────────┘
```

**特征**：
- ✅ 无状态横幅
- ✅ 按钮显示"立即购买"
- ✅ 按钮为蓝色/绿色/橙色（根据产品类型）
- ✅ 鼠标悬停有阴影效果
- ✅ 按钮可点击

---

### 场景2：系统维护状态

**视觉效果**：
```
┌─────────────────────────────────────────────────────┐
│  定价与服务购买                                        │
│  选择适合您的许可证或月卡服务，享受完整功能与优质服务      │
├─────────────────────────────────────────────────────┤
│  ⚠️ 维护中                                           │
│  系统正在进行例行维护，预计30分钟后恢复                  │
│  预计恢复时间: 2025-10-15 11:00                       │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐          │
│  │ AI服务   │  │ 积分套餐  │  │ 许可证   │          │
│  │ ¥4.99/月 │  │ ¥9.9/永久 │  │ ¥14.99  │          │
│  │          │  │          │  │          │          │
│  │ [维护中] │  │ [维护中] │  │ [维护中] │          │
│  └──────────┘  └──────────┘  └──────────┘          │
└─────────────────────────────────────────────────────┘
```

**特征**：
- ⚠️ 黄色状态横幅（左侧黄色边框）
- ⚠️ 按钮显示"维护中"
- ⚠️ 按钮为灰色（#9ca3af）
- ⚠️ 鼠标悬停显示详细信息
- ⚠️ 按钮禁用，无法点击

---

### 场景3：服务故障状态

**视觉效果**：
```
┌─────────────────────────────────────────────────────┐
│  定价与服务购买                                        │
│  选择适合您的许可证或月卡服务，享受完整功能与优质服务      │
├─────────────────────────────────────────────────────┤
│  ❌ 故障                                             │
│  系统出现临时故障，技术团队正在紧急修复中                │
│  预计恢复时间: 2025-10-15 11:30                       │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐          │
│  │ AI服务   │  │ 积分套餐  │  │ 许可证   │          │
│  │ ¥4.99/月 │  │ ¥9.9/永久 │  │ ¥14.99  │          │
│  │          │  │          │  │          │          │
│  │[服务故障]│  │[服务故障]│  │[服务故障]│          │
│  └──────────┘  └──────────┘  └──────────┘          │
└─────────────────────────────────────────────────────┘
```

**特征**：
- ❌ 红色状态横幅（左侧红色边框）
- ❌ 按钮显示"服务故障"
- ❌ 按钮为灰色（#9ca3af）
- ❌ 鼠标悬停显示详细信息
- ❌ 按钮禁用，无法点击

---

### 场景4：降级服务状态

**视觉效果**：
```
┌─────────────────────────────────────────────────────┐
│  定价与服务购买                                        │
│  选择适合您的许可证或月卡服务，享受完整功能与优质服务      │
├─────────────────────────────────────────────────────┤
│  ⚠️ 降级服务                                         │
│  当前访问量较大，部分功能可能响应较慢                    │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐          │
│  │ AI服务   │  │ 积分套餐  │  │ 许可证   │          │
│  │ ¥4.99/月 │  │ ¥9.9/永久 │  │ ¥14.99  │          │
│  │          │  │          │  │          │          │
│  │ [立即购买]│  │ [立即购买]│  │ [立即购买]│          │
│  └──────────┘  └──────────┘  └──────────┘          │
└─────────────────────────────────────────────────────┘
```

**特征**：
- ⚠️ 黄色状态横幅（左侧黄色边框）
- ✅ 按钮显示"立即购买"（仍可用）
- ✅ 按钮为正常颜色
- ✅ 按钮可点击
- ℹ️ 提示用户服务可能较慢

---

## 🎬 交互流程

### 用户访问流程

```
用户打开定价页面
    ↓
前端自动调用 /service-status 接口
    ↓
获取服务状态
    ↓
┌─────────────┬─────────────┐
│ 服务正常    │ 服务异常    │
├─────────────┼─────────────┤
│ 显示正常UI  │ 显示状态横幅│
│ 按钮可用    │ 按钮禁用    │
│ 用户可购买  │ 用户等待    │
└─────────────┴─────────────┘
    ↓
每5分钟自动检查一次
    ↓
状态变化时自动更新UI
```

### 状态变化流程

```
服务正常 → 维护中
    ↓
前端检测到状态变化
    ↓
显示Toast提示："⚠️ 维护中: 系统正在进行例行维护"
    ↓
更新页面UI
    ↓
- 显示黄色状态横幅
- 禁用所有购买按钮
- 按钮文本改为"维护中"
```

---

## 🖱️ 用户交互

### 正常状态下
1. 用户看到"立即购买"按钮
2. 鼠标悬停，按钮有阴影效果
3. 点击按钮，打开购买弹窗
4. 正常完成购买流程

### 维护状态下
1. 用户看到黄色状态横幅
2. 阅读维护信息和预计恢复时间
3. 看到所有按钮显示"维护中"
4. 鼠标悬停按钮，显示详细提示
5. 尝试点击按钮，无响应（已禁用）
6. 等待服务恢复

### 故障状态下
1. 用户看到红色状态横幅
2. 阅读故障信息
3. 看到所有按钮显示"服务故障"
4. 了解技术团队正在修复
5. 等待服务恢复

---

## 📱 响应式设计

### 桌面端（>768px）
```
┌────────────────────────────────────────────┐
│  ⚠️ 维护中                                  │
│  系统正在进行例行维护，预计30分钟后恢复        │
│  预计恢复时间: 2025-10-15 11:00             │
├────────────────────────────────────────────┤
│  [AI服务]  [积分套餐]  [许可证]             │
└────────────────────────────────────────────┘
```

### 移动端（<768px）
```
┌──────────────────┐
│  ⚠️ 维护中        │
│  系统正在进行例行  │
│  维护，预计30分钟 │
│  后恢复           │
│  预计恢复时间:    │
│  2025-10-15 11:00│
├──────────────────┤
│  [AI服务]        │
│  [积分套餐]      │
│  [许可证]        │
└──────────────────┘
```

---

## 🎨 颜色方案

### 状态横幅
| 状态 | 背景色 | 边框色 | 文字色 |
|------|--------|--------|--------|
| 维护中 | #fef3c7 | #f59e0b | #92400e |
| 故障 | #fee2e2 | #ef4444 | #991b1b |
| 降级 | #fef3c7 | #f59e0b | #92400e |

### 按钮状态
| 状态 | 背景色 | 文字色 | 光标 |
|------|--------|--------|------|
| 可用 | 产品色 | #ffffff | pointer |
| 禁用 | #9ca3af | #ffffff | not-allowed |

---

## 🔔 通知机制

### Toast 提示
当服务状态从正常变为异常时，显示 Toast 提示：

```
┌────────────────────────────────┐
│ ⚠️ 维护中: 系统正在进行例行维护  │
└────────────────────────────────┘
```

- 位置：页面右上角
- 持续时间：3秒
- 动画：滑入效果
- 颜色：根据状态类型

---

## 🧪 测试场景

### 测试1：正常访问
1. 打开定价页面
2. 验证无状态横幅
3. 验证按钮显示"立即购买"
4. 验证按钮可点击

### 测试2：维护期间访问
1. 后端设置维护状态
2. 打开定价页面
3. 验证显示黄色状态横幅
4. 验证按钮显示"维护中"
5. 验证按钮禁用
6. 验证显示预计恢复时间

### 测试3：状态实时切换
1. 打开定价页面（正常状态）
2. 后端切换为维护状态
3. 等待最多5分钟
4. 验证页面自动更新
5. 验证显示Toast提示

### 测试4：接口异常
1. 断开网络或阻止接口
2. 打开定价页面
3. 验证使用默认正常状态
4. 验证按钮可用

---

## 📊 性能指标

- **首次加载**: < 100ms（状态检查）
- **状态更新**: < 50ms（UI更新）
- **轮询间隔**: 5分钟
- **接口超时**: 10秒
- **降级时间**: < 1秒

---

## ✅ 验收标准

- [ ] 服务正常时，所有功能正常
- [ ] 服务维护时，按钮正确禁用
- [ ] 服务故障时，按钮正确禁用
- [ ] 状态横幅正确显示
- [ ] 预计恢复时间正确显示
- [ ] 按钮文本正确更新
- [ ] 鼠标悬停提示正确
- [ ] 状态自动更新（5分钟）
- [ ] Toast 提示正确显示
- [ ] 接口失败时正确降级
- [ ] 移动端适配正常
- [ ] 无控制台错误

---

## 🎯 用户体验目标

1. **清晰性**: 用户一眼就能看出服务状态
2. **及时性**: 状态变化及时反馈给用户
3. **友好性**: 提供详细的状态信息和预计恢复时间
4. **容错性**: 即使接口失败也不影响用户体验
5. **一致性**: 所有购买入口统一处理

---

## 📞 用户反馈

预期用户反馈：
- ✅ "很清楚地知道服务状态"
- ✅ "维护信息很透明"
- ✅ "知道什么时候可以恢复"
- ✅ "不会误点击禁用的按钮"
- ✅ "页面不会因为接口问题而崩溃"

